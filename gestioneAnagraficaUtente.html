<!DOCTYPE html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="stileForm.css">
    <title>Gestione Anagrafica</title>
</head>
<body>


<body style="background:#0134a0;">

    <nav class="navbar">
        <span class="open-slide">
          <a href="#" onclick="openSlideMenu()">
            <svg width="30" height="30">
                <path d="M0,5 30,5" stroke="#fff" stroke-width="5"/>
                <path d="M0,14 30,14" stroke="#fff" stroke-width="5"/>
                <path d="M0,23 30,23" stroke="#fff" stroke-width="5"/>
            </svg>
          </a>
        </span>
    
        <ul class="navbar-nav">
            <li><a href="gestioneAnagraficaUtente.html" id="ciao" style="border-style: solid;border-color: white; border-width: 2px 2px 2px 0px; border-radius: 10%;"></a></li>
      
            <li><a href="home.html" style="margin-left: 37%; margin-right: 20%;"> <img class="logo-image" src="logo.png.png" style="margin-top: -29px;height: 120px; width: 220px;" alt="Logo"></a></li>
         
          <li> <label id="numArticoli" for="">0</label><a href="paginaCarrello.html" style="margin-left: 10%; margin-top: -1%;"><img class="logo-cart" src="shop_cart.png" alt="icona carrello"><br>Carrello</a></li>
          
        </ul>
      </nav>
    
      <div id="side-menu" class="side-nav">
        <a ><img src="logo.png.png" style="height: 120px;width: 200px; margin-top: -100px;" alt=""></a>
        <a href="#" class="btn-close" onclick="closeSlideMenu()">&times;</a>
        <a href="home.html">Home</a>
        <a href="gestioneAnagraficaUtente.html">Gestione Anagrafica</a>
        <a href="Documento_sito_sistema_WOW-TRAFFIC®.txt">Scarica Documento Sito Sistema WOW-TRAFFIC®</a>
        <a href="paginaCarrello.html">Carrello</a>
      </div>

      <!-- prova -->

      <div class="container">
        <div class="header">
            <h2>Anagrafica</h2>
        </div>
        <form id="form" class="form">
            <div class="form-control">
                <label for="username">Username</label>
                <input type="text" placeholder="Username" id="username" readonly/>
                <i class="fas fa-check-circle"></i>
                <label for="username"><span style="font-size: 10px;color:#a1003e ;">non modificabile</span> </label>
                <i class="fas fa-exclamation-circle"></i>
                <small>Error message</small>
            </div>
            <div class="form-control">
                <label for="username">Email</label>
                <input type="email" placeholder="user@mail.com" id="email" />
                <i class="fas fa-check-circle"></i>
                <i class="fas fa-exclamation-circle"></i>
                <small>Error message</small>
            </div>
            <div class="form-control">
                <label for="nome">Nome</label>
                <input type="text" placeholder="Nome " id="nome"/>
                <i class="fas fa-check-circle"></i>
                <i class="fas fa-exclamation-circle"></i>
                <small>Error message</small>
            </div>
            <div class="form-control">
                <label for="cognome">Cognome</label>
                <input type="text" placeholder="Cognome" id="cognome"/>
                <i class="fas fa-check-circle"></i>
                <i class="fas fa-exclamation-circle"></i>
                <small>Error message</small>
            </div>
            <div class="form-control">
                <label for="dataDiNascita">Data di Nascita</label>
                <input type="date" id="dataDiNascita"/>
                <i class="fas fa-check-circle"></i>
                <i class="fas fa-exclamation-circle"></i>
                <small>Error message</small>
            </div>
            <div class="form-control">
                <label for="indirizzoConsegne">Indirizzo Consegne</label>
                <input type="text" placeholder="Indirzzo Consegne" id="indirizzoConsegne"/>
                <i class="fas fa-check-circle"></i>
                <i class="fas fa-exclamation-circle"></i>
                <small>Error message</small>
            </div>
            <label for="" style="font-size:12px;color: #fc0000;">Per cambiare password <br>Inserire quella nuova e poi confermare con quella nuova</label>
            <div class="form-control">
                <label for="password">Nuova Password</label>
                <input type="password" placeholder="Password" id="password"/>
                <i class="fas fa-check-circle"></i>
                <i class="fas fa-exclamation-circle"></i>
                <small>Error message</small>
            </div>
            <div class="form-control">
                <label for="password2">Vecchia Password di Conferma</label>
                <input type="password" placeholder="Password " id="password2"/>
                <i class="fas fa-check-circle"></i>
                <i class="fas fa-exclamation-circle"></i>
                <small>Error message</small>
            </div>
            
            <button >Applica Modifiche</button>
        </form>

</body>
<script>
    function openSlideMenu(){
      document.getElementById('side-menu').style.width = '250px';
      document.getElementById('main').style.marginLeft = '250px';
    }

    function closeSlideMenu(){
      document.getElementById('side-menu').style.width = '0';
      document.getElementById('main').style.marginLeft = '0';
    }
  </script>
<script>
     document.getElementById('username').value = localStorage.getItem('username')
     document.getElementById('email').value = localStorage.getItem('email')
     document.getElementById('nome').value = localStorage.getItem('nome')
     document.getElementById('cognome').value = localStorage.getItem('cognome')
     document.getElementById('dataDiNascita').value = localStorage.getItem('dataNascita')
     document.getElementById('indirizzoConsegne').value = localStorage.getItem('indirizzo')
    
     const oldPassword = localStorage.getItem('password')
     
    const username = document.getElementById('username')
    const email = document.getElementById('email')
    const nome = document.getElementById('nome')
    const cognome = document.getElementById('cognome')
    const dataDiNascita = document.getElementById('dataDiNascita')
    const indirizzo = document.getElementById('indirizzoConsegne')
    const password = document.getElementById('password')
    const password2 = document.getElementById('password2')
    
    

    form.addEventListener('submit', e => {
        e.preventDefault();
        
        checkInputs();
    });
    
    function checkInputs() {
        const userValue = username.value.trim()
        const emailValue = email.value.trim()
        const nomeValue = nome.value.trim()
        const cognomeValue = cognome.value.trim()
        const dataDiNascitaValue = dataDiNascita.value.trim()
        const indirizzoValue = indirizzo.value.trim()
        const passwordValue = password.value.trim()
        const password2Value = password2.value.trim()
        
        var numErrori = 0
        
        if(emailValue === '') {
            setErrorFor(email, 'L\'Email non può essere vuota');
            numErrori++;
        }
        if(nomeValue === '') {
            setErrorFor(nome, 'Il Nome non può essere vuoto');
            numErrori++;
        }
        if(cognomeValue === '') {
            setErrorFor(cognome, 'Il Cognome non può essere vuoto');
            numErrori++;
        }
        if( dataDiNascitaValue === '') {
            setErrorFor(dataDiNascita, 'La Data di Nascita non può essere vuota');
            numErrori++;
        }
        if(indirizzoValue === '') {
            setErrorFor(indirizzo, 'L\'indirizzo non può essere vuoto');
            numErrori++;
        }
        
        if(passwordValue === '') {
            setErrorFor(password, 'La Password non può essere vuota');
        }
        
        if(password2Value === '') {
            setErrorFor(password2, 'La Password non può essere vuota');
            numErrori++;
        }
        if (numErrori === 0 && passwordValue !== oldPassword) {
            
            formValido(emailValue, nomeValue, cognomeValue, dataDiNascitaValue, indirizzoValue, passwordValue)
        }
    }
    
    function setErrorFor(input, message) {
        const formControl = input.parentElement;
        const small = formControl.querySelector('small');
        formControl.className = 'form-control error';
        small.innerText = message;
    }
    
    function formValido(emailValue, nomeValue, cognomeValue,dataDiNascitaValue ,indirizzoValue, passwordValue) {
        localStorage.setItem('email', emailValue)
        localStorage.setItem('nome', nomeValue)
        localStorage.setItem('cognome', cognomeValue)
        localStorage.setItem('dataNascita', dataDiNascitaValue)
        localStorage.setItem('indirizzo',indirizzoValue)
        localStorage.setItem('password', passwordValue)
        alert("Modifiche avvenute")
        
    }
</script>
<script>
    document.getElementById('ciao').innerHTML = 'Ciao '+'<span style="background-color:#2aa22a;padding:8px;border-radius:10px">'+localStorage.getItem('nome')+'</span>'
</script>
</html>